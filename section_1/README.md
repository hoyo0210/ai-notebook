# SECTION 1: AI大模型原理与API使用

- AIGC发展：从GPT1到GPT4
- AIGC的表现与优势
- AIGC的通用能力应用
- 大模型API使用

## 环境设置

### 1. 安装依赖
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh
# 脚本会自动创建虚拟环境并安装依赖

# 方法2：手动安装
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. 配置环境变量
在项目根目录创建 `.env` 文件，添加以下配置：
```bash
# 阿里云百炼API密钥
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# OpenWeatherMap API密钥（用于天气查询）
OPENWEATHER_API_KEY=your_openweather_api_key_here
```

### 3. 启动应用
使用提供的智能启动脚本：

#### 方法1：交互式启动（推荐）
```bash
./start_app.sh
```
脚本会自动：
- ✅ 检查并创建虚拟环境
- ✅ 自动安装依赖包
- ✅ 提供美观的交互式选择界面
- ✅ 智能检测可用端口
- ✅ 显示应用访问地址

#### 方法2：直接启动特定应用
```bash
./start_app.sh sentiment    # 情感分析
./start_app.sh weather      # 天气查询
./start_app.sh table        # 表格提取
./start_app.sh summary      # 文章摘要
./start_app.sh ops          # 运维事件
./start_app.sh customer     # AI客服
./start_app.sh fraud        # 保险欺诈检测
```

#### 应用访问
应用启动后，脚本会自动显示访问地址，通常为：
- 本地访问：`http://localhost:8501`（或自动分配的端口）
- 网络访问：`http://[您的IP]:8501`

#### 停止应用
在终端中按 `Ctrl+C` 即可停止应用

## 名词解释
- **SFT（Supervised Fine-Tuning，监督微调）**：在已有预训练模型基础上，利用人工标注的数据对模型进行进一步微调，使其更符合特定任务需求。
- **RM（Reward Model，奖励模型）**：通过人工对模型生成的多个答案进行排序，训练出能够对答案优劣进行评分的模型，用于后续强化学习阶段。
- **PPO（Proximal Policy Optimization，近端策略优化）**：一种常用的强化学习算法，用于在奖励模型的指导下优化大模型的输出，使其更符合人类偏好。
- **泛化**：指模型不仅能在训练数据上表现良好，还能在未见过的新数据上保持较好表现的能力，是衡量模型实际应用价值的重要标准。

## 什么是AI

AI的核心目标是**让机器能够执行通常需要人类智能的任务**，例如语言理解、图像识别、复杂问题解决等

早期阶段：以规则为基础的专家系统，依赖于预设的逻辑和规则
机器学习时代：通过数据训练模型，是机器能够从数据中学习规则
深度学习时代：利用神经网络模拟人脑的复杂结构，处理更复杂的任务
大模型时代：以大规模数据和算力为基础，构建通用性强、性能卓越的AI模型

## AI的分类

分析式AI
- 也称为判别式AI或决策式AI，其核心人物式对已有数据进行分类、预测或决策。
- 优势在于其高精度和高效性，但其局限性在于仅能处理又有数据的模式，无法创造新内容。
生成式AI（AIGC）
- 专注于创造新内容，例如文本、图像、音频等。
- 突破在于其创造性和灵活性，但也面临数据隐私、版权保护等挑战。
- ChatGPT、Gemini、DeepSeek、Qwen。

## 大语言模型（LLM - Large Language Model）

大语言模型是一种通用自然语言生成模型，使用大量语料数据训练，以实现生成文本、回答问题、对话生成等

*基本能力*：语言生成、上下文学习、世界知识
*"超"能力*：响应人类指令、泛化到没有见过的任务、代码生成和代码理解 

## 从GPT1到GPT4

2018年: **GPT-1 (1.17亿参数)** 有一定泛化能力，能够用于和监督任务无关的NLP任务

2019年: **GPT-2 (15亿参数)** 除了理解能力外，GPT-2在生成方面表现出了强大的天赋：阅读摘要、聊天、编故事，生成假新闻、钓鱼邮件、在线角色扮演等

2020年: **GPT-3 (1750亿参数)** 自监督模型，可以完成自然语言处理的绝大部分任务：写代码、创作、写剧本，模仿某个人的文字等

2022年1月: **InstructGPT** 一个经过微调的新版GPT-3，可将有害、不真实的、有偏差的输出最小化

2022年12月: **ChatGPT** InstructGPT的衍生品，他将人类的反馈纳入训练过程，更好地让模型与用户意图保持一致

## ChatGPT 是如何训练出来的？

步骤1: 收集数据，微调监督模型

从问题库中选择问题然后人工编写答案最后在GPT3.5上做微调（SFT），得到**监督学习模型**。

步骤2: 收集比较数据，训练奖励模型

从问题库中选择问题然后重复生成4次回答，再对答案进行人工排序，最后利用排序结果训练**奖励模型**（RM）。

步骤3: 收集数据，强化学习优化模型

重新选一个问题，强化学习模型（PPO）生成回答，喂给奖励模型打分，生成分数并**持续迭代模型**。

## ChatGPT的优势

- 基于人类反馈的强化学习（RLHF - Reinforcement Learning from Human Feedback）
- 对用户真实意图的理解
- 上下文衔接能力
- 对知识和逻辑的理解能力

## AI写代码

针对AI写代码的优势和不足我们要尽可能避免AI的不足的同时尽可能的利用AI的优势。
- 如将功能拆分成足够小的块
- 提供完善的文档和更精确的Prompt

**为什么AI会写代码？**

因为他经过了自然语言和几十亿的代码的训练。
> 不仅是代码，其他工作也类似（比如写方案，写文章）

**AI写代码的不足**

- 很难一次完成你的需求，通常需要交互9-10次的交互才能达到你的期望
- 需要manager足够了解自己的需求，并指出ChatGPT作业的不足

**AI写代码的优势**

- 效率很高，只要你给出具体的指令，1秒后出结果
- 代码质量比一般人好（很博学，各种任务都能完成，有代码注释，可以给你讲每一个代码模块的解释）

**Thinking：AI出现的意义是什么？**

让人们通过自然语言可以工作，Prompt Engineering 是一种新的工作方式。

**Thinking：每个人都能抓住这个机会吗？**

如果想要抓住这个机会需要关注以下几点：

1. 价值驱动：解决什么问题很关键。
2. 清洗的思考和表达。
3. 善于利用各种工具来解决问题。

## 一些问题

AI如果是单纯的对文本进行处理，很容易产生幻觉。如果要避免或者减少AI出现幻觉，就要让AI围绕着可靠的数据来源以及代码来开展，并在出现幻觉时及时的纠正。在和AI的沟通过程中生成一个文档，围绕着文档的内容进行对话是一个不错的选择。

**Reasoning Modal和Non-reasoning Modal**

相对于创作来说的话：

Reasoning Modal：先写在草稿纸上，进行撰写/规划，最后再写正文

Non-reasoning Modal：直接写正文

## 大模型API使用

> 可以尝试使用Function Calling完成复杂的业务逻辑

### CASE 1: 情感分析

**功能描述：** 使用阿里云百炼大模型分析文本的情感倾向，判断文本的情感倾向（正面、负面、中性）。

**应用场景：**
- 社交媒体评论分析
- 客户反馈情感分析
- 产品评价分析
- 舆情监控

**Web界面功能：**
- 文本情感分析
- 关键词提取
- 置信度评估
- 历史记录查看

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh sentiment

# 方法2：交互式选择
./start_app.sh
# 然后选择 "1. 情感分析"

# 方法3：手动启动（不推荐）
cd case1_sentiment_analysis
source ../venv/bin/activate
streamlit run app.py
```

### CASE 2: 天气查询

**功能描述：** 使用阿里云百炼大模型结合外部天气API，实现智能天气查询功能。

**应用场景：**
- 智能语音助手
- 移动应用天气功能
- 出行规划助手
- 农业气象服务

**Web界面功能：**
- 自然语言天气查询
- Function Calling实现
- 智能回复生成
- 详细天气数据展示

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh weather

# 方法2：交互式选择
./start_app.sh
# 然后选择 "2. 天气查询"

# 方法3：手动启动（不推荐）
cd case2_weather
source ../venv/bin/activate
streamlit run app.py
```

### CASE 3: 表格提取

**功能描述：** 使用阿里云百炼大模型从文本或图像中提取表格数据，并进行结构化处理。

**应用场景：**
- 文档数字化处理
- 财务报表分析
- 学术论文数据提取
- 报告自动化处理

**Web界面功能：**
- 文本表格提取
- 文件上传处理
- 多格式输出（CSV、JSON、Excel、Markdown）
- 结果下载

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh table

# 方法2：交互式选择
./start_app.sh
# 然后选择 "3. 表格提取"

# 方法3：手动启动（不推荐）
cd case3_table_extraction
source ../venv/bin/activate
streamlit run app.py
```

### CASE 4: 文章摘要

**功能描述：** 使用阿里云百炼大模型对长篇文章进行智能总结，提取关键信息和核心观点。

**应用场景：**
- 新闻摘要生成
- 学术论文总结
- 会议纪要整理
- 文档快速浏览

**Web界面功能：**
- 智能文章总结
- 多风格输出（学术、通俗、新闻、技术）
- 关键点提取
- 文章分析
- URL文章抓取
- 文件上传支持

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh summary

# 方法2：交互式选择
./start_app.sh
# 然后选择 "4. 文章摘要"

# 方法3：手动启动（不推荐）
cd case4_article_summary
source ../venv/bin/activate
streamlit run app.py
```

### CASE 5: 运维事件处理

**功能描述：** 使用阿里云百炼大模型获取本机系统信息并进行智能分析，提供系统状态诊断和优化建议。

**应用场景：**
- IT运维自动化
- 系统监控告警处理
- 故障诊断助手
- 运维知识库管理

**Web界面功能：**
- 系统信息收集
- 性能指标分析
- 智能诊断建议
- 系统优化推荐

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh ops

# 方法2：交互式选择
./start_app.sh
# 然后选择 "5. 运维事件"

# 方法3：手动启动（不推荐）
cd case5_ops_incident
source ../venv/bin/activate
streamlit run app.py
```

### CASE 6: AI客服

**功能描述：** 使用阿里云百炼大模型构建智能客服系统，提供24/7自动化的客户服务支持。

**应用场景：**
- 电商客服机器人
- 银行智能助手
- 技术支持服务
- 售前咨询助手

**Web界面功能：**
- 智能对话系统
- 多场景支持（电商、技术、银行、保险等）
- 对话历史管理
- 知识库查询
- 快速回复模板

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh customer

# 方法2：交互式选择
./start_app.sh
# 然后选择 "6. AI客服"

# 方法3：手动启动（不推荐）
cd case6_ai_customer_service
source ../venv/bin/activate
streamlit run app.py
```

### CASE 7: 保险欺诈检测

**功能描述：** 使用机器学习算法分析保险数据，训练模型预测和识别潜在的欺诈行为，提供风险评估和决策支持。

**应用场景：**
- 保险风险评估
- 欺诈检测系统
- 理赔自动化
- 风险控制决策

**Web界面功能：**
- 多模型训练（随机森林、逻辑回归、SVM、XGBoost）
- 模型性能评估
- 单案欺诈预测
- 批量案件处理
- 风险评分模型
- 特征重要性分析

**运行方式：**
```bash
# 方法1：使用智能启动脚本（推荐）
./start_app.sh fraud

# 方法2：交互式选择
./start_app.sh
# 然后选择 "7. 保险欺诈检测"

# 方法3：手动启动（不推荐）
cd case7_insurance_fraud
source ../venv/bin/activate
streamlit run app.py
```

## 环境配置

### 安装依赖
```bash
pip install -r requirements.txt
```

### 环境变量配置
创建 `.env` 文件并配置以下变量：
```
DASHSCOPE_API_KEY=your_dashscope_api_key_here
OPENWEATHER_API_KEY=your_openweather_api_key_here  # 仅CASE 2需要
```

### 获取API Key
1. **阿里云百炼API Key：**
   - 访问 [阿里云百炼控制台](https://bailian.console.aliyun.com/)
   - 注册/登录阿里云账号
   - 开通百炼服务
   - 在控制台获取API Key

2. **OpenWeatherMap API Key（仅CASE 2需要）：**
   - 访问 [OpenWeatherMap官网](https://openweathermap.org/)
   - 注册/登录账号
   - 获取免费API Key
   - 参考文档：[OpenWeatherMap API文档](https://openweathermap.org/api)

### 运行所有案例
```bash
# 安装依赖
pip install -r requirements.txt

# 运行任意案例
cd case1_sentiment_analysis
streamlit run app.py
```

## 技术栈

- **前端框架：** Streamlit
- **AI模型：** 阿里云百炼（qwen-turbo、qwen-plus、qwen-max）
- **数据处理：** Pandas, NumPy
- **文件处理：** OpenPyXL, Pillow
- **可视化：** Plotly, Matplotlib

## 学习要点

1. **API调用：** 学习如何调用阿里云百炼API进行文本处理
2. **Function Calling：** 理解如何结合外部API实现复杂功能
3. **Prompt工程：** 掌握有效的提示词设计技巧
4. **Web开发：** 使用Streamlit快速构建AI应用界面
5. **数据处理：** 学习文本、表格、文件等多种数据格式的处理
6. **错误处理：** 掌握API调用异常处理和用户体验优化

## 深入思考问题

### 关于AI写代码
- **为什么AI会写代码？** 因为它经过了自然语言和几十亿代码的训练
- **AI写代码的不足：** 很难一次完成需求，通常需要9-10次交互才能达到期望
- **AI写代码的优势：** 效率高，代码质量好，有注释，能解释每个模块
- **如何避免AI的不足：** 将功能拆分成足够小的块，提供完善的文档和更精确的Prompt

### 关于AI出现的意义
- **核心意义：** 让人们通过自然语言可以工作，Prompt Engineering是一种新的工作方式
- **抓住机会的关键：**
  1. 价值驱动：解决什么问题很关键
  2. 清晰的思考和表达
  3. 善于利用各种工具来解决问题

### 关于AI幻觉问题
- **问题：** AI如果单纯对文本处理，容易产生幻觉
- **解决方案：** 让AI围绕可靠的数据来源和代码开展工作，及时纠正幻觉
- **实践建议：** 在和AI沟通过程中生成文档，围绕文档内容进行对话

### 关于模型选择
- **Reasoning Modal vs Non-reasoning Modal：**
  - Reasoning Modal：先写在草稿纸上，进行撰写/规划，最后再写正文
  - Non-reasoning Modal：直接写正文

## 未来学习方向

### 深入技术细节
- **模型架构细节：** 深入了解Transformer、注意力机制、位置编码等核心技术
- **模型选择和调优：** 学习如何根据具体任务选择合适的模型，以及模型参数调优技巧
- **最新AI发展动态：** 关注最新的模型发布、技术突破和应用创新

### 实践技能提升
- **多模态AI应用：** 探索文本、图像、音频、视频的多模态处理
- **企业级AI部署：** 学习AI模型的生产环境部署和运维
- **AI伦理和安全：** 了解AI应用的伦理考虑和安全防护措施

### 行业应用探索
- **垂直领域AI：** 探索金融、医疗、教育等特定行业的AI应用
- **AI产品设计：** 学习如何设计用户友好的AI产品界面和交互
- **AI商业模式：** 理解AI技术的商业化和产业化路径

## 智能启动脚本特性

### 🚀 自动化功能
- **虚拟环境管理**：自动检查、创建和激活虚拟环境
- **依赖包安装**：自动检测并安装所需的Python包
- **端口管理**：智能检测端口占用，自动选择可用端口
- **错误处理**：完善的错误提示和异常处理

### 🎯 用户体验
- **交互式界面**：美观的菜单选择界面
- **多种启动方式**：支持交互式选择和直接命令启动
- **实时状态反馈**：显示启动进度和访问地址
- **一键停止**：Ctrl+C 快速停止应用

### 📱 使用示例
```bash
# 交互式启动（推荐新手使用）
./start_app.sh

# 直接启动特定应用（推荐熟练用户）
./start_app.sh sentiment

# 查看帮助信息
./start_app.sh --help
```
